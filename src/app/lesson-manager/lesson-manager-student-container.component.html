<!-- Navbar (Header) Starts -->
<nav class="navbar navbar-expand-lg navbar-light bg-faded">
    <div class="container-fluid">
        <div class="navbar-header">
        </div>
    </div>
</nav>
<div class="main-panel">
    <div class="main-content">
        <div class="content-wrapper">
            <div class="container-fluid">

                <section>
                    <app-callan-lesson-event
                            [lessonEvent]="currentLessonEvent"
                            [isConfirmButtonCanBeShown]="isConfirmLessonButtonShown"
                            [view]="lessonEventViewNameEnum.STUDENT"
                            (lessonEventConfirmEvent)="handleLessonEventConfirm($event)"
                            *ngIf="currentLessonEvent && isLessonEventShown"
                    ></app-callan-lesson-event>

                    <app-callan-courses-list
                            [allCourses$]="allCourses$"
                            [currentCustomerCourseProgresses$]="courseProgresses$"
                            [isLessonEventsCreateButtonShown]="isLessonEventsCreateButtonShown"
                            [isTopUpLessonEventsBalanceButtonShown]="isTopUpLessonEventsBalanceButtonShown"
                            [currentCourseProgress$]="currentCourseProgress$"
                            (courseSelectEvent)="handleSelectCourseProgress($event)"
                            (lessonEventCreateEvent)="handleLessonEventCreate($event)"
                            (topUpLessonEventsBalanceEvent)="handleLessonEventsBalanceShown($event)"
                            *ngIf="view === viewNameEnum.DEFAULT"
                    ></app-callan-courses-list>

                    <div class="row"
                         *ngIf="view === viewNameEnum.DEFAULT && isCustomerCourseAddButtonShown && currentCustomer"
                    >
                        <div class="col-sm-12">
                            <div class="mt-2">
                                <a class="btn btn-raised gradient-mint white" href="javascript:void(0)" (click)="handleCustomerCourseAddShow()">Add a new course</a>
                            </div>
                        </div>
                    </div>

                    <app-callan-customer-course-add
                            [allCourses$]="allCourses$"
                            [currentCustomerCourseProgresses$]="courseProgresses$"
                            [formErrors$]="formErrors$"
                            (cancelEvent)="handleCustomerCourseAddCancel()"
                            (courseAddEvent)="handleCustomerCourseAdd($event)"
                            *ngIf="view === viewNameEnum.CUSTOMER_COURSE_ADD"
                    ></app-callan-customer-course-add>

                    <app-lesson-events-balance-details
                            [courseProgress]="currentCourseProgress"
                            [formErrors$]="formErrors$"
                            (cancelEvent)="handleLessonEventsBalanceDetailsCancel()"
                            (lessonEventsBalanceSaveEvent)="handleLessonEventsBalanceSave($event)"
                            *ngIf="view === viewNameEnum.BALANCE_DETAILS"
                    ></app-lesson-events-balance-details>

                    <app-callan-lesson-events-calendar
                            [courseProgress]="currentCourseProgress"
                            [calendarEvents]="calendarEvents"
                            [datesEnabled]="datesEnabled"
                            [refresh$]="calendarRefresh$"
                            [currentDate]="currentDate"
                            [student]="currentCustomer"
                            (cancelEvent)="handleLessonEventCreateCancel()"
                            (lessonEventCreateEvent)="lessonEventSave($event)"
                            (showCurrentWeekEvent)="handleCalendarShowCurrentWeek()"
                            (showNextWeekEvent)="handleCalendarShowNextWeek()"
                            (showPreviousWeekEvent)="handleCalendarShowPreviousWeek()"
                            (hourSegmentClickEvent)="handleCalendarHourSegmentClick($event)"
                            (lessonEventClickEvent)="handleCalendarLessonEventClick($event)"

                            *ngIf="currentCourseProgress && view === viewNameEnum.CALENDAR"
                    ></app-callan-lesson-events-calendar>

                    <app-callan-lesson-events-list
                            [lessonEvents]="lessonEvents"
                            [refresh$]="lessonEventsListRefresh$"
                            [isLessonEditingShown]="true"
                            *ngIf="view === viewNameEnum.DEFAULT"
                            (setCurrentLessonEventEvent)="handleSetCurrentLessonEvent($event)"
                            (cancelLessonEventEvent)="handleCancelLessonEvent($event)"
                    ></app-callan-lesson-events-list>

                    <p *ngIf="currentCustomer">Current customer: {{currentCustomer.email}}</p>
                </section>
            </div>
        </div>
    </div>
</div>